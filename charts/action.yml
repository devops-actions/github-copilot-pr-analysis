name: 'Generate Mermaid Charts'
description: 'Generate Mermaid charts from PR analysis results'
inputs:
  github_token:
    description: 'GitHub token (optional, may be needed for some operations)'
    required: false
    default: ''

runs:
  using: 'composite'
  steps:
    - name: Set up Node.js
      uses: actions/setup-node@49933ea5288caeca8642d1e84afbd3f7d6820020 # v4.4.0
      with:
        node-version: '18'
        cache: 'npm'

    - name: Install dependencies
      shell: bash
      run: npm ci

    - name: Generate Mermaid Charts
      shell: bash
      env:
        GITHUB_TOKEN: ${{ inputs.github_token }}
      run: npm run charts
